# 個人基本資料擷取功能分析

## 需求分析

### 用戶提供的HTML結構
```html
<span class="idno">身分證號： A126***550</span>
<span class="name">鄭暄瀚</span>
<span class="birth">民 84/06/19</span>
<span class="sex">男</span>
<span class="sline"></span>
```

### 資料欄位識別
1. **身分證號** - class="idno"，格式：身分證號： A126***550
2. **姓名** - class="name"，格式：鄭暄瀚
3. **出生日期** - class="birth"，格式：民 84/06/19
4. **性別** - class="sex"，格式：男

## 擷取策略

### 1. CSS選擇器方法
- 使用特定的class名稱來定位元素
- 針對健保系統的特定結構進行優化

### 2. 資料清理和格式化
- **身分證號**：移除前綴文字，保留實際號碼
- **姓名**：直接使用文字內容
- **出生日期**：處理民國年格式，可選擇轉換為西元年
- **性別**：直接使用文字內容

### 3. 容錯機制
- 如果特定class不存在，嘗試其他方法
- 使用文字模式匹配作為備用方案
- 提供詳細的日誌記錄

## 實現計劃

### 1. 新增個人資料擷取函數
```javascript
function extractPersonalInfo() {
  // 使用CSS選擇器擷取個人資料
  // 清理和格式化資料
  // 返回結構化的個人資料物件
}
```

### 2. 整合到現有流程
- 在主要擷取函數中調用個人資料擷取
- 將個人資料包含在回應中
- 在儲存時一併處理個人資料

### 3. 儲存格式
- 在說明文件中包含個人資料
- 可選擇單獨儲存為JSON檔案
- 在CSV檔案中添加個人資料欄位

## 隱私考量
- 個人資料僅在本地處理和儲存
- 不上傳或傳輸個人敏感資料
- 提供選項讓用戶控制是否擷取個人資料

## 預期輸出格式
```json
{
  "personalInfo": {
    "idNumber": "A126***550",
    "name": "鄭暄瀚",
    "birthDate": "民 84/06/19",
    "birthDateAD": "2006/06/19",
    "gender": "男"
  },
  "extractedAt": "2025-06-03T02:00:00.000Z",
  "source": "健保醫療資訊雲端查詢系統"
}
```

