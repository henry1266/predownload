<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>醫療資料頁面監測工具</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <!-- 標題區域 -->
        <div class="header">
            <div class="logo">
                <img src="../../assets/icon48.png" alt="圖示" class="icon">
                <h1>醫療資料監測工具</h1>
            </div>
            <div class="version">v2.0.3</div>
        </div>

        <!-- 頁面資訊區域 -->
        <div class="page-info general" id="pageInfo">
            <div class="page-info-label">當前頁面</div>
            <div class="page-url" id="urlDisplay">載入中...</div>
        </div>

        <!-- 監測狀態區域 -->
        <div class="status-section">
            <div class="status-header">
                <div class="status-indicator">
                    <div class="status-dot inactive" id="statusDot"></div>
                    <span class="status-text" id="statusText">監測已停止</span>
                </div>
            </div>
            
            <!-- 頁面狀態 -->
            <div class="page-status ready" id="pageStatus">準備就緒</div>
            
            <!-- 監測資訊 -->
            <div class="monitor-info" id="monitorInfo" style="display: none;">
                <div class="info-row">
                    <span class="info-label">開始時間:</span>
                    <span class="info-value" id="startTime">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">最後活動:</span>
                    <span class="info-value" id="lastActivity">--</span>
                </div>
                <div class="info-row">
                    <span class="info-label">總跳轉次數:</span>
                    <span class="info-value" id="jumpCount">0</span>
                </div>
                <div class="info-row">
                    <span class="info-label">成功跳轉:</span>
                    <span class="info-value success" id="successfulJumps">0</span>
                </div>
            </div>
        </div>

        <!-- 控制按鈕區域 -->
        <div class="controls">
            <button class="monitor-btn" id="toggleMonitorBtn">
                <span class="btn-icon" id="monitorIcon">▶️</span>
                <span class="btn-text" id="monitorBtnText">開始監測</span>
            </button>
            
            <button class="capture-btn" id="captureBtn">
                <span class="btn-icon">📋</span>
                <span class="btn-text">手動擷取</span>
            </button>
        </div>

        <!-- 處理狀態面板 -->
        <div class="status-panel" id="statusPanel" style="display: none;">
            <div class="status-message" id="statusMessage">處理中...</div>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
        </div>

        <!-- 說明區域 -->
        <div class="help-section">
            <div class="help-text">
                <strong>URL 跳轉監測模式：</strong>
                <ul>
                    <li><strong>監測跳轉</strong>：監測頁面在失敗頁面 (/#) 和成功頁面 (/IMUE0008) 之間的跳轉</li>
                    <li><strong>持續監測</strong>：跳回失敗頁面時不停止監測，繼續等待下次成功跳轉</li>
                    <li><strong>自動觸發</strong>：只在成功跳轉到目標頁面時檢查資料並執行動作</li>
                    <li><strong>跳轉統計</strong>：顯示總跳轉次數和成功跳轉次數</li>
                    <li><strong>手動擷取</strong>：隨時可手動執行資料擷取</li>
                </ul>
            </div>
        </div>

        <!-- 底部連結 -->
        <div class="footer">
            <a href="#" id="helpLink" class="footer-link">使用說明</a>
            <span class="separator">|</span>
            <a href="#" id="settingsLink" class="footer-link">設定</a>
        </div>
    </div>

    <script src="popup.js"></script>
</body>
</html>

